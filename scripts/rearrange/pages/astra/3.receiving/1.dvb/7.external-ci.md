---
title: "Дешифрование каналов с помощью внешнего DVB-CI"
date: 2023-06-27
image: https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/ddci.jpg
---

С развитием цифрового вещания защита контента от несанкционированного доступа становится все более актуальной. Именно поэтому многие провайдеры спутникового, кабельного или эфирного телевидения шифруют контент с помощью систем условного доступа (CAS).

Обычно в этом процессе используется Common Interface (CI) - интерфейс, позволяющий модулям условного доступа (CAM) подключаться к DVB-приемнику и расшифровывать защищенные каналы. Расшифровка каналов с помощью внешнего адаптера DVB-CI обеспечивает гибкую архитектуру головной станции за счет разделения приемной и обрабатывающей частей.

## Преимущества внешнего DVB-CI[](https://help.cesbo.com/astra/receiving/dvb/external-ci#advantages-of-external-dvb-ci)

- Зашифрованные каналы из разных источников могут быть сгруппированы для последующей расшифровки в одном CI-модуле. Это может быть весьма полезно, если у вас есть различные DVB-транспондеры с зашифрованными каналами
- Каналы могут приниматься и расшифровываться на отдельных серверах. Это особенно удобно, если вы используете приемники SAT>IP. При этом сервер Astra с картами CI может храниться в серверной комнате, а приемники SAT>IP располагаться ближе к крыше, где установлены спутниковые антенны. Подробнее о [Приеме SAT>IP](https://help.cesbo.com/astra/receiving/dvb/satip-client) с помощью Astra

## Требования[](https://help.cesbo.com/astra/receiving/dvb/external-ci#requirements)

- Внешний адаптер DVB-CI. Мы протестировали и поддерживаем следующие модели:
    - [DigitalDevices Octopus Twin CI](https://www.digital-devices.eu/shop/en/accessoires/bridge/266/digital-devices-octopus-twin-ci-double-ci-slot-with-2-expansionports)
    - [TBS6900](https://www.tbsdtv.com/products/tbs6900-dvb-dual-pci-e-card.html)
- Модуль условного доступа (CAM)
- SmartCard от вещателя

![DigitalDevices Octopus Twin CI](https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/ddci.jpg)

## Конфигурация Astra[](https://help.cesbo.com/astra/receiving/dvb/external-ci#astra-configuration)

### Создание MPTS

Создать MPTS с необходимыми каналами во входном адресе для каждого канала необходимо добавить опцию `cas` - чтобы astra передавала все необходимое для декодирования. Например:

![Входы MPTS](https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/mpts.png)

### Создание виртуального адаптера

::alert Виртуальный адаптер доступен для версий, выпущенных после 20 сентября 2022 года
::

Создать новый адаптер в веб-интерфейсе Astra с помощью кнопки `CI` значение в `Virtual` поле. Сохраните настройки адаптера, нажав кнопку Применить

![Новый адаптер](https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/new-adapter.png)

Варианты CI:

- `Name` - имя для адаптера
- `ID` - уникальный идентификатор адаптера. Можно оставить это значение пустым, система сама сгенерирует идентификатор при сохранении адаптера
- `Virtual` - Тип виртуального адаптера. выберите `CI` опция
- `Adapter` - номер CI-адаптера в системе
- `Stream ID` - идентификатор потока с MPTS. это значение идентификатора MPTS, созданного на первом шаге
- `CI Device` - номер устройства на адаптере CI. По умолчанию: `0`
- `CI Bitrate` - Битрейт TBS CI в МБит/с. По умолчанию: `70`. Для устройств DigitalDevices битрейт может быть определен в настройках драйвера
- `CA Delay` - задержка, в секундах, перед отправкой информации о канале в модуль условного доступа. По умолчанию: `20` второй

Номер адаптера CI можно найти с помощью команды:

```
find /dev/dvb/ -name ca*
```

Например, результат будет таким:

```
/dev/dvb/adapter5/ca0
```

Где:

- `5` - Номер адаптера CI
- `0` - устройство на адаптере CI

### Адаптер для сканирования

Теперь можно нажать кнопку Сканировать.

![Адаптер сканирования](https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/scan.png)

Выберите необходимые программы и добавьте их, нажав на кнопку Apply.

![Приборная панель](https://cdn.cesbo.com/help/astra/receiving/dvb/external-ci/dashboard.png)

## Поиск и устранение неисправностей[](https://help.cesbo.com/astra/receiving/dvb/external-ci#troubleshooting)

### Модуль CI+ не работает

Модули CI+ предназначены только для потребительского использования и не поддерживаются внешними адаптерами DVB-CI

### Дешифрование только 1 канала

Количество программ (каналов), которые CAM может дешифровать одновременно, зависит от производителя и/или модели CAM

### Как проверить меню CAM?

Если для получения дополнительных данных о модуле условного доступа или смарт-карте необходимо обратиться к CAM-меню, то можно использовать `gnutv` утилита цифрового телевидения. Запуск:

```
gnutv -adapter N -cammenu
```

Где N - номер адаптера CI.
