---
title: "RP-фильтр и мультикаст в Linux"
date: 2023-03-01
---

Технология rp\_filter является полезным инструментом для повышения безопасности и защиты серверов, принимающих многоадресный UDP-трафик, особенно для серверов с несколькими сетевыми интерфейсами. При настройке серверов на прием многоадресного UDP-трафика возможны два варианта: настройка системной маршрутизации для многоадресных групп или модификация настройки rp\_filter.

## Настройка строгого режима для фильтра RP[](https://help.cesbo.com/misc/tools-and-utilities/network/rp-filter#configure-strict-mode-for-rp-filter)

Чтобы изменить настройку rp\_filter, добавьте следующие строки в файл `/etc/sysctl.conf` файл:

```
net.ipv4.conf.eth0.rp_filter = 2
```

Отметим, что `eth0` следует заменить на имя используемого интерфейса. Чтобы применить изменения, перезагрузите систему или выполните следующую команду:

```
sysctl -p
```

## Значения фильтра RP[](https://help.cesbo.com/misc/tools-and-utilities/network/rp-filter#rp-filter-values)

В Linux существует три возможных значения параметра rp\_filter:

- `0` - полностью отключает функцию rp\_filter
- `1` - по умолчанию и включает строгую фильтрацию обратного пути. В этом режиме ядро проверяет, поступают ли входящие пакеты на ожидаемый интерфейс в соответствии с таблицей маршрутизации, и отбрасывает пакеты, которые не поступают.
- `2` - эта настройка включает свободную фильтрацию обратного пути. Этот режим является менее строгим, чем строгая фильтрация обратного пути, и позволяет пакетам поступать на другие интерфейсы при условии, что они могут быть возвращены к адресу источника на интерфейсе, с которого они были получены

Выбор настройки rp\_filter зависит от конкретной конфигурации сети и требований безопасности системы. Важно выбрать подходящую настройку, чтобы обеспечить оптимальную безопасность и производительность сети.
