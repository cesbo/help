---
title: "Фильтрация PID-ов"
date: 2023-07-17
---

Фильтрация потока удаляет определенные пакеты в потоке MPEG-TS на основе их PID. Кроме того, процесс модифицирует соответствующие информационные таблицы программ, такие как Program Association Table (PAT) и Program Map Table (PMT), чтобы отразить удаление идентифицированных пакетов.

## Анализ канала[](https://help.cesbo.com/astra/processing/mpegts/filter#analyze-channel)

Для определения доступных элементарных потоков и их PID необходимо проанализировать канал. Это можно сделать, запустив встроенный анализатор MPEG-TS либо из меню канала, либо непосредственно из настроек канала.

![Анализ исходного потока](https://cdn.cesbo.com/help/astra/processing/utilities/filter/analyze-original.png)

На представленном скриншоте мы видим следующие элементарные потоки:

1. Видео - ПИД: `1331`
2. Субтитры - PID: `1335`, Язык: `bul` (Болгарский)
3. Аудио - PID: `1332`, Язык: `bul` (Болгарский)
4. Аудио - PID: `1336`, Язык: `eng` (на английском языке)

Каждый элементарный поток представлен уникальным идентификатором пакета (PID), который может быть использован для фильтрации потоков в Astra.

## Входная фильтрация[](https://help.cesbo.com/astra/processing/mpegts/filter#input-filtering)

Для того чтобы выполнить фильтрацию потока, мы удалим поток с PID 1336. Эту операцию можно выполнить, добавив в поле `filter=1336` опция на входной адрес

![Опция ввода](https://cdn.cesbo.com/help/astra/processing/utilities/filter/input-options.png)

## Инверсная фильтрация PID[](https://help.cesbo.com/astra/processing/mpegts/filter#inverse-input-filtering)

Чтобы выполнить инверсную фильтрацию и удалить все пиды кроме указанных, можно использовать символ тильды (`~`) вместе с параметром фильтрации. Например, чтобы сохранить только видеопоток и аудиопоток на английском языке (PID 1331 и 1336), нужно добавить параметр `filter~=1331,1336` к входному адресу. При этом все остальные потоки будут удалены, останутся только заданные потоки.

Для проверки результатов примененного фильтра потока нажмите кнопку "Применить", чтобы сохранить изменения. Далее снова запустите встроенный анализатор MPEG-TS. Это позволит проверить, успешно ли отфильтрованы ненужные потоки.

![Анализ отфильтрованного потока](https://cdn.cesbo.com/help/astra/processing/utilities/filter/analyze-filtered.png)

## Фильтрация для всех входов[](https://help.cesbo.com/astra/processing/mpegts/filter#filtering-for-all-inputs)

Для потоковой фильтрации по всем входам используется параметр `Remap` можно использовать вкладку в настройках канала. Этот метод подходит для работы с функцией remap.

![Параметры перестройки](https://cdn.cesbo.com/help/astra/processing/utilities/filter/remap-options.png)

В `Map PIDs` поле, `video=101, audio.eng=102` был установлен. В результате PID видео- и англоязычного аудиопотоков изменяются на 101 и 102, соответственно, по всем входам.

Впоследствии в `Filter PID` поле, `101, 102` было указано. Это означает, что на выходе будут сохранены только потоки с этими PID, а все остальные элементарные потоки будут отфильтрованы.

Подробнее: [Ремап ПИДов](https://help.cesbo.com/astra/processing/mpegts/remap)
