---
title: Troubleshooting
sidebar:
    order: 90
---

UDP (Протокол пользовательских датаграмм) - протокол связи в локальных сетях или Интернете с минимальными задержками и минимальной стабильностью.

## Программное обеспечение для анализа вашей проблемы

### Анализ UDP с помощью Astra MPEG-TS Analyzer

С Astra вы можете анализировать любой поддерживаемый источник. Просто выполните в консоли следующую команду:

```sh
astra --analyze "udp://eth0@239.255.1.1:1234"
```

Чтобы остановить анализатор Astra, нажмите Ctrl+C. Подробнее о [Astra MPEG-TS Analyzer](/en/articles/tools-and-utilities/astra-mpeg-ts-analyzer/)

### Анализ UDP с помощью Tcpdump

Tcpdump — это распространенный инструмент для проверки сетевого трафика. Например, команда для проверки приема UDP-мультикаста для группы 239.255.1.1 на интерфейсе eth0:

```sh
tcpdump -pnni eth0 udp and host 239.255.1.1
```

Если вы не знаете актуальный интерфейс, вы можете найти его с помощью команды:

```sh
ip route get 239.255.1.1
```

Вывод tcpdump выглядит как множество строк с информацией об источнике пакетов, назначении и длине. Например:

```
21:38:42.143839 IP 192.168.88.100.33610 > 239.255.1.1.1234: UDP, length 1316
21:38:42.143868 IP 192.168.88.100.33610 > 239.255.1.1.1234: UDP, length 1316
```

Чтобы остановить tcpdump, нажмите Ctrl+C.

## UDP вообще не работает

Не работает означает нулевую скорость передачи в выводе Astra MPEG-TS Analyzer. Например:

```
Jan 27 09:00:00: INFO: Bitrate: 0 Kbit/s
Jan 27 09:00:01: INFO: Bitrate: 0 Kbit/s
```

### Нет UDP пакетов на интерфейсе

В первую очередь проверьте трафик на сетевом интерфейсе с помощью утилиты tcpdump. Если информации о входящих пакетах нет, необходимо проверить сетевую конфигурацию или конфигурацию источника.

1. Неверная конфигурация маршрутов. Если у вас несколько интерфейсов, проверьте, правильно ли настроен маршрут к мультикаст-группе, или укажите имя интерфейса в адресе udp.
2. Проблемы с подключением. Убедитесь, что ваш сервер подключен к Ethernet или создан VLAN-интерфейс.
3. Несовместимая версия IGMP. Например, ваш сервер использует IGMPv3, но сетевое оборудование поддерживает только IGMPv2: [Настроить версию IGMP](/en/articles/system/configure-igmp-version/)

### Программное обеспечение не может получать UDP пакеты

Если tcpdump показывает информацию о UDP пакетах, могут быть следующие проблемы:

1. UDP блокируется правилами брандмауэра. Проверьте конфигурацию вашего брандмауэра.
2. Если у вашего сервера несколько интерфейсов, добавьте маршрут к мультикаст-группе или настройте RP Filter: [RP Filter и прием Multicast в Linux](/en/astra/receiving-udp/rp-filter/)

## Ошибки CC при приеме UDP

Ошибки CC (индикатор непрерывности) указывают на нарушение целостности пакетов. Ошибка может быть вызвана потерей или избыточностью пакетов:

```
Jan 27 09:00:00: INFO: Bitrate: 13259 Kbit/s
Jan 27 09:00:00: ERROR: CC: PID:18=3 PID:20=3 PID:256=24
Jan 27 09:00:01: INFO: Bitrate: 13261 Kbit/s
Jan 27 09:00:01: ERROR: CC: PID:18=5 PID:20=2
```

Подробнее об [ошибках CC](/en/astra/logs/cc/).