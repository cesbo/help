---
title: UDP for Digital TV delivery
sidebar:
    order: 1
---

UDP (User Datagram Protocol) — это важный протокол транспортного уровня в сетях, известный своей простотой и скоростью. Он играет значительную роль в вещательных и потоковых приложениях, включая доставку цифрового телевидения, где потеря пакетов данных может быть приемлемой, но скорость и задержки критичны.

![UDP Multicast Diagram](https://cdn.cesbo.com/help/astra/delivery/udp.svg)

Одно из ключевых применений UDP — это доставка телевизионного контента через мультикастовые сети. Этот подход широко используется в различных секторах, среди наиболее распространенных сценарием использования следующие:

- Организации индустрии гостеприимства: Отели, курорты и другие объекты гостеприимства часто используют UDP мульткаст для распределения телевизионного контента по номерам и общим зонам.
- Интернет-провайдеры: Локальные сети интернет-провайдеров используют этот протокол для доставки цифровых телевизионных услуг своим абонентам.
- Спортивные арены: Стадионы и арены могут использовать UDP мульткаст для передачи прямых трансляций игры или матча на различные экраны по всей арене.

## Формат адреса медиа

Адрес медиа настраивает пункт назначения UDP потока. Формат этого адреса следующий:

```
udp://[interface@]address[:port][#options]
```

В квадратных скобках указаны необязательные параметры.

- `interface` - имя локального интерфейса, такое как `eth0`. Если это поле не указано, UDP поток будет доставлен согласно системным маршрутам.
- `address` - IPv4 адрес мультикастовой группы, localhost или удаленного хоста для уникастовой доставки.
- `port` - сетевой порт для доставки UDP. Если не указан, используется порт по умолчанию `1234`.

Дополнительные параметры могут быть определены после символа `#` и разделены символом `&`, аналогично параметрам в обычном URL. Вот доступные опции:

- `socket_size=bytes` - определяет пользовательский размер системного сокета. Если не указано, берется значение по умолчанию из системной конфигурации: `sysctl net.core.wmem_default`.
- `sync` - включает передачу UDP в отдельном потоке с синхронизацией битрейта.
- `no_sync` - отключает синхронизацию битрейта, если она была включена глобально.
- `cbr=Kbps` - включает синхронизацию битрейта и постоянный битрейт. Подробнее читайте о [Постоянном битрейте (CBR)](/en/astra/delivery-udp/cbr/).
- `ttl=n` - управляет временем жизни дейтаграммы, чтобы предотвратить её бесконечное циркулирование из-за ошибок маршрутизации. Значение по умолчанию — `32`.
- `sap` - включает SAP. Подробнее читайте о [Протоколе анонсирования сеансов для мультикаста](/en/astra/delivery-udp/sap/).

Вот несколько примеров использования формата адреса медиа в различных сценариях с Astra:

- Мультикастовая доставка через конкретный интерфейс: Если вы хотите доставить UDP поток в мультикаст-группу с адресом `239.255.0.1` через определенный сетевой интерфейс, такой как `eth0`, адрес будет выглядеть так: `udp://eth0@239.255.0.1`.
- Мультикастовая доставка по системному маршруту: Если вы хотите доставить UDP поток в мультикаст-группу с адресом `239.255.0.2` и хотите, чтобы система определила маршрут (интерфейс), адрес будет: `udp://239.255.0.2`.
- Уникастовая доставка на конкретный хост: Если вы отправляете уникастовый поток на конкретный хост с IP-адресом `192.168.1.100`, адрес будет выглядеть так: `udp://192.168.1.100`.
- Доставка на определенный порт: Если вы хотите доставить UDP поток в мультикаст-группу с адресом `239.255.0.3` на определенный порт, скажем, `5000`, адрес будет: `udp://239.255.0.3:5000`.
- Включение постоянного битрейта для подготовки потока к DVB модуляции: Если вы хотите доставить UDP поток в DVB модулятор, вам может понадобиться постоянный битрейт, например, `24000Kbit/s`, адрес будет: `udp://239.255.0.4#cbr=24000`.
- Доставка на локальный хост с конкретным портом: Если вам нужно доставить UDP поток на сервис на том же сервере, например, FFMpeg для транскодинга, вы бы использовали следующий адрес: `udp://127.0.0.1:11000`.

## Веб-интерфейс

Чтобы настроить новый UDP вывод через веб-интерфейс, начните с выбора "New Stream" из главного меню. Затем в списке вывода нажмите на значок шестеренки и установите "Output Type" на UDP. В качестве альтернативы вы можете изменить существующий поток, открыв его настройки, добавив новый вывод и нажав на соответствующий значок шестеренки.

![UDP Output Options](https://cdn.cesbo.com/help/astra/delivery/broadcasting/udp/options.png)

Большинство параметров, представленных в веб-интерфейсе, напрямую соответствуют компонентам UDP адреса, как описано в разделе "Формат адреса медиа".

## Устранение неполадок