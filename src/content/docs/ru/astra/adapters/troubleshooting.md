---
title: Troubleshooting
sidebar:
    order: 90
---

Подробное руководство по устранению неполадок приема DVB, охватывающее основные аспекты, такие как качество сигнала, уровень ошибок, настройка оборудования и помехи. Узнайте практические советы и методы диагностики и устранения распространенных проблем, обеспечивая беспрепятственный просмотр цифрового ТВ.

## Все работает нормально до перезагрузки сервера

Наиболее распространенная проблема с адаптерами DVB заключается в том, что они перестают работать после перезагрузки сервера. Вероятно, ядро Linux было обновлено автоматически или вручную. Попробуйте переустановить драйвер.

## не удалось открыть frontend: Нет такого файла или каталога

Первым шагом является проверка наличия адаптеров DVB в системе с помощью команды:

```sh
ls /dev/dvb
```

Если команда показывает сообщение об ошибке "Нет такого файла или каталога", первым делом нужно проверить, доступно ли оборудование системе, с помощью команды:

```sh
lspci | grep Multimedia
```

Если адаптеры правильно подключены к слоту PCIe, вы должны увидеть список PCIe адаптеров, например:

```
01:00.0 Multimedia controller: Digital Devices GmbH Cine V7
```

Попробуйте переустановить драйвер. Если это не поможет, пожалуйста, обратитесь к поставщику оборудования.

## не удалось открыть frontend: Устройство или ресурс занят

Адаптер занят другим процессом. Возможно, Astra была запущена дважды.

Вы можете проверить, какой процесс использует Astra с помощью следующей команды:

```sh
lsof | grep adapter0
```

Пример вывода:

```
astra 23068 ... /dev/dvb/adapter31/dvr0
astra 23068 ... /dev/dvb/adapter31/frontend0
```

- `astra` - имя процесса
- `23068` - PID процесса
- `/dev/dvb/adapter32/...` - путь к адаптеру

## Сигнал в порядке, но каналы не работают

Эта проблема характерна для адаптеров от DigitalDevices. Проверьте вывод dmesg на наличие ошибок i2c:

```sh
dmesg | grep i2c
```

если вы видите сообщения типа i2c_write error, отключите MSI (Message Signaled Interrupts) в драйвере:

Откройте файл `/etc/modprobe.d/ddbridge.conf` в любом текстовом редакторе. Найдите строку `options ddbridge`. После `ddbridge` добавьте опцию `msi=0`. Например:

```
options ddbridge msi=0 fmode=1
```

## Ошибка PCIe шины

Адаптеры DVB могут перестать работать со временем или работать с такими проблемами, как ошибки CC и повторная настройка сигнала. Эти признаки неисправности могут отражаться как следующая ошибка в dmesg:

```
pcieport 0000:00:1c.3: PCIe Bus Error: severity=Corrected, type=Physical Laye
```

Как правило, эта ошибка возникает в результате попытки управления активным состоянием системы (ASPM) снизить энергопотребление слота PCIe.

## Отключение ASPM

На серверах мы рекомендуем отключить управление энергопотреблением.

Откройте файл `/etc/default/grub` в любом текстовом редакторе и найдите строку, начинающуюся с:

```
GRUB_CMDLINE_LINUX_DEFAULT=
```

добавьте параметр `pcie_aspm=off`:

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash pcie_aspm=off"
```

Сохраните файл и примените изменения:

```
sudo update-grub
```

Перезагрузите сервер

## Secure Boot

Если папка `/dev/dvb` пуста или не найдена, попробуйте запустить драйвер вручную. Запустите в вашей консоли:

```
modprobe dvb-core
```

Если вы получили ошибку:

```
modprobe: ERROR: could not insert 'dvb_core': Required key not available
```

Это сообщение об ошибке связано с Secure Boot.

1. Перезагрузите систему и войдите в настройки BIOS/UEFI.
2. Перейдите на страницу конфигурации Secure Boot (точное местоположение зависит от производителя и версии BIOS/UEFI).
3. Отключите опцию Secure Boot.
4. Сохраните изменения и выйдите.
5. Загрузитесь в Linux снова и проверьте адаптеры с помощью `ls /dev/dvb`

## cxd2878: SLtoAIT_BandSetting error

Эта ошибка может появляться в журнале dmesg для DVB адаптеров TBS 6209SE. Чтобы решить эту проблему, установите параметр Bandwidth в настройках DVB адаптера на вкладке Advanced:

- 8MHz для DVB-T или DVB-T2
- 6MHz для ISDB-T