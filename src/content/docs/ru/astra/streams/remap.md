---
title: "How to Remap PIDs"
sidebar:
  order: 33
---

Переназначение PIDs потока полезно в различных сценариях:

- Плавная избыточность ввода: если первичный и резервный вводы имеют различные PIDs для видеопотоков и элементарных аудиопотоков, переключение на резервный ввод может привести к временному прерыванию воспроизведения. Переназначив PIDs для достижения единообразия между первичным и резервным вводами, переход можно сделать плавным.
- Подготовка многопрограммного потока (MPTS): при подготовке канала для включения в MPTS-вещание каждый элементарный поток внутри канала должен обладать уникальным PID. Переназначение обеспечивает эту уникальность PIDs, что позволяет без проблем добавлять канал в MPTS.

## Анализ канала

Чтобы выявить доступные элементарные потоки и их PIDs, необходимо проанализировать канал. Это можно сделать, запустив встроенный анализатор MPEG-TS либо из меню канала, либо напрямую из настроек канала.

![Анализ оригинального потока](https://cdn.cesbo.com/help/astra/processing/utilities/remap/analyze-original.png)

На предоставленном скриншоте мы видим следующие элементарные потоки:

1. Таблица программной карты (PMT) - PID: `374`
2. Видео - PID: `371`
3. Аудио - PID: `376`, Язык: `eng` (Английский)

Каждый элементарный поток представлен уникальным идентификатором пакета (PID), который может использоваться для переназначения потока в Astra.

## Переназначение ввода

Для выполнения переназначения потока мы изменим PID PMT на 100, PID видеопотока на 101, и PID аудиопотока на 102. Эту операцию можно выполнить, добавив опцию `map.pmt=100&map.video=101&map.audio.eng=102` к адресу ввода.

![Опции ввода](https://cdn.cesbo.com/help/astra/processing/utilities/remap/input-options.png)

## Переназначение для всех вводов

Для переназначения потоков для всех вводов можно использовать вкладку `Remap` в настройках канала.

![Опции переназначения](https://cdn.cesbo.com/help/astra/processing/utilities/remap/remap-options.png)

В поле "Map PIDs" установлено `pmt=100, video=101, audio.eng=102`. Это изменяет PIDs видеопотока и английского аудиопотока на 101 и 102 соответственно, для всех вводов.

Чтобы проверить результаты применения фильтра потока, нажмите "Apply", чтобы сохранить изменения. Затем снова запустите встроенный анализатор MPEG-TS. Это позволит убедиться, что ненужные потоки были успешно отфильтрованы.

![Анализ переназначенного потока](https://cdn.cesbo.com/help/astra/processing/utilities/remap/analyze-remapped.png)

## Селекторы

Селекторы определяют, какой PID должен быть изменён на новое значение

- `371`: любое число в качестве оригинального PID
- `pmt`: PID для таблицы программной карты (PMT)
- `video`: видеопоток
- `audio`: любой аудиопоток. Вы можете указать эту опцию дважды, если у вас несколько аудиопотоков, например: `video=101, audio=102, audio=103`
- `audio.eng`: аудиопоток с определённым языковым кодом
- `ac3`: аудиопоток в формате AC3. Селектор `audio` также может использоваться для потоков AC3
- `aac`: аудиопоток в формате AAC. Селектор `audio` также может использоваться для потоков AAC
- `pcr`: PID для пакетов с PCR. Обычно временная метка PCR доставляется с пакетами видеопотока
- `sub`: поток субтитров
- `ttx`: телетекстовый поток
- `ait`: PID для таблицы информации о приложении (AIT)