---
title: DVB Adapters API
sidebar:
    order: 2
---

В интерфейсе Astra вы можете управлять конфигурациями DVB адаптеров и контролировать их состояние с помощью методов HTTP API.

## Конфигурация адаптера

```json
{
    "id": "...",
    "name": "...",
    "type": "...",
    "enable": true,
    "adapter": 0,
    "device": 0
}
```

- `name` - имя адаптера;
- `type` - тип адаптера: `S`, `S2`, `T`, `T2`, `ATSC`, `ISDB-T`, `C`, `C/A`, `C/B`, `C/C`;
- `enable` - `true`, если адаптер включен;
- `adapter` - номер адаптера в системе: `/dev/dvb/adapter0`
- `device` - номер устройства в адаптере: `/dev/dvb/adapter0/frontend0`
- другие опции зависят от конфигурации адаптера

## Получение конфигурации адаптера

:::caution
Версия: 2021-04-12 или позднее
:::

Запрос: `GET /api/adapter-info/{id}`

- `id` - уникальный идентификатор адаптера

В ответе будет JSON с конфигурацией адаптера

## Изменение конфигурации адаптера

Запрос: `POST /control/`

```json
{
    "cmd": "set-adapter",
    "id": "...",
    "adapter": {...}
}
```

- `id` - уникальный идентификатор адаптера
- `adapter` - конфигурация адаптера

## Перезапуск адаптера

Запрос: `POST /control/`

```json
{
    "cmd": "restart-adapter",
    "id": "..."
}
```

- `id` - уникальный идентификатор адаптера

## Удаление адаптера

:::danger
Этот метод удаляет адаптер и все связанные потоки
:::

Запрос: `POST /control/`

```json
{
    "cmd": "set-adapter",
    "id": "...",
    "adapter": {
        "remove": true
    }
}
```

- `id` - уникальный идентификатор адаптера

## Получение статуса адаптера

:::caution
Версия: 2021-04-12 или позднее
:::

Запрос: `GET /api/adapter-status/{id}`

- `id` - уникальный идентификатор адаптера

Дополнительные параметры запроса: `GET /api/adapter-status/{id}?t={time}`

- `time` - по умолчанию `1` - статистика за последнюю минуту, `0` - статистика за последнюю секунду (текущий статус адаптера)

Ответ:

```json
{
    "timestamp": 0,
    "instance": "...",
    "name": "...",
    "lock": true,
    "signal": 0,
    "signal_db": 0,
    "snr": 0,
    "snr_db": 0,
    "ber": 0,
    "unc": 0,
    "bitrate": 0
}
```

- `timestamp` - время отчета, для `t=0` это текущее время;
- `instance` - имя экземпляра, если указано в Настройки → Общие → Имя экземпляра;
- `name` - имя потока;
- `lock` - `true`, если тюнер настроен и может принимать данные;
- `signal` - приблизительный уровень сигнала в процентах;
- `signal_db` - уровень сигнала в dBm, умноженный на 100;
- `snr` - приблизительное отношение сигнал/шум в процентах;
- `snr_db` - отношение сигнал/шум в дБ, умноженное на 100;
- `ber` - счетчик битовых ошибок;
- `unc` - счетчик блоковых ошибок;
- `bitrate` - общий битрейт в Кбит/с.