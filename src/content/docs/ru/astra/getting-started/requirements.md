---
title: Hardware Requirements
description: CPU, RAM, networking, and DVB adapter requirements for optimal Astra performance
sidebar:
    order: 31
---

Цифровое телевидение является высоконагруженным сервисом и требует некоторых ресурсов. Astra не ограничивает количество каналов или клиентов. Однако выбранные протоколы и доступные ресурсы могут влиять на эти параметры.

## ЦП

Мы рекомендуем использовать ЦП с максимальной доступной частотой. Оптимальная частота процессора для головной станции цифрового ТВ составляет 2.5 - 3 ГГц или выше. Процессоры с большим количеством ядер, но с более низкой частотой (например, 1.8-2.5 ГГц) не подходят для задач, требующих низкой задержки.

Процессоры только с кэшем L2 могут быть приемлемыми, но в 99% это указывает на то, что остальное оборудование, такое как материнская плата и ОЗУ, устарело и не подходит для использования.

Пример хорошего процессора:

- Intel Xeon 10C E5-2680v2
- Xeon 8C E5-2670
- Intel Xeon 6C X5670
- Core i5-9600K

Убедитесь, что процессор работает в режиме производительности и режим энергосбережения отключен. [Подробнее](/en/articles/system/cpupower/).

## ОЗУ

Для работы системы и общего программного обеспечения мы рекомендуем минимум 2 Гб ОЗУ. Зарезервируйте как минимум 20%.

Дополнительная ОЗУ требуется:

- Для приема ресурсы не так важны, как для доставки. Около 1 Гб ОЗУ на 100 каналов.
- Для DVB модуляторов, таких как TBS, DigitalDevices или HiDes, Astra выделяет 256 Мб на транспондер.
- Для доставки UDP-каналов с синхронизацией битрейта Astra выделяет около 12 Мб на канал. Около 2 Гб ОЗУ достаточно для доставки 100 каналов по UDP-протоколу.
- Для доставки UDP-каналов без синхронизации Astra выделяет только 1 Мб на канал. Это не рекомендуется.
- Для HLS доставки использование ОЗУ зависит от настроек HLS. По умолчанию Astra готовит 4 сегмента, каждый длиной до 3 секунд. Для HD канала с битрейтом 10 Мбит/с выделяется примерно 15 Мб (расчет 4 * 3 * 10 / 8), плюс фиксированные 2 Мб на канал, которые не зависят от битрейта канала. Каждая активная сессия требует около 2 Мб ОЗУ.

Частота ОЗУ также является немаловажным фактором. Примерные данные для сравнения:

- DDR1 400 МГц - не подходит
- DDR2 600 МГц - подходит для небольших конфигураций, например приема 10-15 каналов и их трансляции в udp
- DDR3 1333-1600 МГц - подходит
- DDR4 2133-2800 МГц - подходит
- DDR4 2800-3400 МГц - дорогостоящая и излишняя

## Сетевое оборудование

Избегайте использования VLAN, Bonding и потребительских сетевых адаптеров.

### Размер буфера Rx/Tx

Размеры кольцевого буфера NIC различаются в зависимости от производителя и класса NIC. Больший размер буфера снижает вероятность потери пакетов во время задержек планирования.

- менее 1024 обычно не рекомендуется
- от 2048 до 4096 считаются хорошими
- 8192 считается отличным

### Очереди

Пакеты передаются между кольцевым буфером NIC и ядром операционной системы через очереди. Каждой очереди назначено одно выделенное ядро ЦП. Сетевые адаптеры с несколькими очередями могут обрабатывать пакеты одновременно.

Сетевые адаптеры с одной очередью предназначены только для потребительского использования и не рекомендуются для настройки головной станции цифрового ТВ.

### Рекомендуемые сетевые адаптеры

- **Intel**
    - 82599ES, 82599EB (2 порта)
    - 82599EN (1 порт)
    - i350AM2
- **Mellanox**
    - MT27520
- **SolarFlare**
    - SFN7122F

### Не рекомендуемые сетевые адаптеры

- **D-Link**, **Realtek**: любые модели для потребительского использования не подходят для настройки головной станции цифрового ТВ.
- **Intel**: Хотя мы рекомендуем сетевые карты Intel, конкретно эти модели не рекомендуем. Только одна очередь, и все данные будут обрабатываться только одним ядром ЦП:
    - 82541GI Gigabit Ethernet Controller (rev 05)
    - 82541PI Gigabit Ethernet Controller (rev 05)
    - 82574L Gigabit Network Connection
    - 82540EM Gigabit Ethernet Controller (rev 03)
    - 82545EM
    - 82579LM
    - 82571EB Gigabit Ethernet Controller (rev 06)
    - 82573L Gigabit Ethernet Controller
    - 82573E Gigabit Ethernet Controller (rev 03)
    - 82578DC Gigabit Network Connection (rev 06)
    - 82546EB Gigabit Ethernet Controller (rev 01)
    - 82546GB Gigabit Ethernet Controller (rev 03)
    - I219-V (rev 31)
    - I217
- **Broadcom**
    - NetXtreme BCM5701
    - NetXtreme BCM5704
    - NetXtreme BCM5715
    - NetXtreme BCM5719 - периодически возникают потери пакетов при скорости 256 мбит/с.
    - NetXtreme BCM5721
    - NetXtreme BCM5722
    - NetXtreme II BCM5708
    - NetXtreme II BCM5709 - хотя есть несколько очередей, RSS может начать работать только на одной из них, создавая высокую нагрузку на одно ядро.
    - NetXtreme II BCM5716, поддерживает распределение прерываний по доступным ядрам, но все равно оставляет основную часть пакетов на ядре 0.
- **Qualcomm**
    - Atheros AR8121/AR8113/AR8114 Gigabit или Fast Ethernet
    - Atheros AR8131 Gigabit Ethernet
    - Atheros AR8132 Fast Ethernet
    - Atheros AR8151 v2.0 Gigabit Ethernet (rev c0)
- **Другие**
    - **VMware VMXNET3** - не подходит для UDP доставки, слишком много потерянных пакетов
    - VIA Technologies, Inc. VT6105/VT6106S [Rhine-III] (rev 86)
    - 3Com Corporation 3c905C-TX/TX-M [Tornado]
    - RedHat Virtio network device
    - Marvell 88E8057 PCI-E Gigabit Ethernet Controller
    - Marvell 88E8050 PCI-E ASF Gigabit Ethernet Controller
    - QLogic Corp. cLOM8214 1/10GbE Controller (rev 54) - не работает изменение количества очередей, по умолчанию 3 rx, 1 tx.
    - HP NC326i
    - NVidia Corporation MCP55 Ethernet (rev a3) - только одна очередь. В результате даже при малом объеме трафика возникает очень высокая нагрузка на ядро процессора, которое занимается обработкой трафика от этой сетевой карты, что приводит к недопустимо медленной обработке пакетов.

## DVB

### Рекомендуемые DVB адаптеры

- **DigitalDevices**: Все DVB адаптеры от [Digital Devices](https://www.digital-devices.eu) хорошо работают с Astra.
    - DD Max SX8 - 8-тюнерный приемник S/S2 + мультисвитч
    - DD Max A8i - 8-тюнерный приемник DVB-C2/T2 ISDB-T
- **TBS**: DVB адаптеры от [TBS](https://www.tbsdtv.com) являются одним из самых популярных решений для приема цифрового телевидения.
    - TBS6904 - 4-тюнерный приемник S/S2
    - TBS6909 - 8-тюнерный приемник S/S2 + мультисвитч
    - TBS6205 - 4-тюнерный приемник DVB-T2/T/C
- **DVBSky**
    - T980CI - 1 тюнер DVB-T/T2/C приемник с CI слотом.
    - S950CI - 1 тюнер DVB-S/S2 приемник с CI слотом.
    - T9580 - 2-тюнерный S2/T2/T/C приемник с независимыми тюнерами.

Рекомендуемые DVB модуляторы и CI интерфейсы:

- **DigitalDevices**
    - DD RESI DVB-C FSM - DVB-C модуль
    - DD Octopus Twin CI - 2 CI интерфейса для декодирования каналов
- **TBS**
    - TBS6004 DVB-C 4 QAM PCIe карта
    - TBS6104 DVB-T Quad модуль
    - TBS6900 - 2 CI интерфейса для декодирования каналов

### Не рекомендуемые DVB модуляторы

- **DigitalDevices**
    - Digital Devices RESI SDR Modulator - DVB-T/ISDB-T (не поддерживается. непредсказуемое поведение)
    - Digital Devices RESI SDR Modulator - PAL Modulator (не поддерживается)
- **TBS**
    - TBS6032 16 QAM DVB-C Modulator (непредсказуемое поведение)

### Не рекомендуемые DVB адаптеры

- SkyStar 1 - старая карта, не поддерживает стандарт S2
- Mystique SaTiX-SX - старая карта, не поддерживает стандарт S2
- Любые USB адаптеры

## Резюме

Необходимый объем ОЗУ рассчитывается как сумма:

- Работа общего программного обеспечения
- Прием
- Доставка
- Другое программное обеспечение на вашем сервере
- Резервирование ОЗУ

### Пример с DVB-C вещанием

В резюме для 100 каналов:

- Работа общего программного обеспечения: 2 Гб
- Прием: 1 Гб
- Доставка с 4 транспондерами: 2 Гб (256 Мб на транспондер, плюс дополнительные ресурсы для мультиплексирования)
- Другое программное обеспечение: 0
- Резервирование ОЗУ: (2 + 1 + 2) * 0.5 = 2.5 Гб

Итого (округлено вверх): 8 Гб

### HLS

Из-за природы HLS все клиенты подключаются непосредственно к серверу. Для балансировки нагрузки мы рекомендуем использовать кеширующие серверы. Подробнее читайте в [HLS Caching Proxy с Nginx](/en/articles/tools-and-utilities/hls-caching-proxy-with-nginx/).