---
title: "Changelog"
noindex: true
sidebar:
    order: 5
---

## 250221

[Скачать Astra-250221](https://cdn.cesbo.com/astra/builds/astra-250221)

### SRT

- Библиотека SRT понижена до версии v1.4.3 из-за ошибок потери пакетов и CC
- Приём SRT автоматически перезапускает соединения, когда битрейт падает до нуля

### DVB

- Добавлена опция `restart_adapter` для перезапуска DVB адаптера с анализатором каналов. Когда канал получает поток с ошибками, отправляется команда на перезапуск адаптера.
- Исправлено падение при запуске DVB из Lua скриптов
- SAT>IP отправляет опции на SAT>IP сервер для Multistream/PLS

### UDP

- Исправлен шторм логов с сообщением "UDP recv buffer overflow"
- Добавлена опция `join` для UDP выхода для отправки запроса Multicast Join (требуется некоторыми сетевыми коммутаторами)
- Добавлена опция `ts_size=204` для MPEG-TS с пакетами размером 204 байта (потоки ISDB-T в Бразилии и Японии)

### MPEG-TS

- Исправлено remap для пакетов AIT

### Веб-интерфейс

- Ссылки на m3u-плейлисты с разными источниками (HLS, HTTP MPEG-TS, UDP): Настройки -> HTTP Play

## 241024

[Скачать Astra-241024](https://cdn.cesbo.com/astra/builds/astra-241024)

### SRT

- Обновлена библиотека SRT до версии 1.5.3
- Сессии для SRT-выхода в режиме прослушивания
- Рефакторинг SRT-выхода, улучшена стабильность, исправлена утечка памяти
- Опция `streamid` для SRT-входа

### TBS DVB-T модулятор

- Поддержка TBS6104 DVB-T Quad Modulator Card

### HLS

- HLS-выход передает метки SCTE-35
- HLS-вход корректирует счётчик непрерывности, если он начинается с 0 на каждом сегменте

### MPEG-TS

- Поддержка текста, закодированного с UTF-16, ISO/IEC 10646 BMP в таблицах EIT и SDT
- Останов генерации PSI, если нет данных на входе

### Веб-интерфейс

- Иконки для DVB виртуальных адаптеров
- Исправления статуса и битрейта для адаптера SAT>IP в веб-интерфейсе
- Исправление перезагрузки веба при переподключении
- Исправление удаления серверов в веб-интерфейсе
- Кнопка выхода
- Вкладки для Settings -> General

### Внутренние изменения

- Перенос кода из Lua скриптов в Astra Core: методы API для статуса потока, отчёта по потоку, плейлистов, обработки JSON и другие

## 230719

[Скачать Astra-230719](https://cdn.cesbo.com/astra/builds/astra-230719)

В этом журнале изменений приведено краткое сравнение с последним стабильным релизом 220504

### SRT

- Библиотека SRT обновлена до версии 1.5.1
- Вариант `statsout=FILE` для записи статистики приема/передачи SRT в CSV-файл. Этот файл может быть обработан с помощью [https://github.com/mbakholdina/srt-stats-plotting](https://github.com/mbakholdina/srt-stats-plotting).
- Поддерживается стандартный формат адреса, например `srt://example.com?passphrase=12345`. Если ваш адрес содержит символ # в опции streamid, то его следует изменить на `%23`. Например: `srt://example.com?streamid=%23!::r=LaminorTV,m=request`
- Повышенная стабильность приема
- опция `oheadbw` - превышение пропускной способности восстановления над входной скоростью. По умолчанию: `25`
- опционы `sndbuf` и `rcvbuf` для настройки размера буфера передачи и приема

### Виртуальные адаптеры DVB

Виртуальные адаптеры - это опция в настройках адаптера для упрощения настройки потоков:

- MPTS-потоки: можно задать адрес MPTS-потока и просканировать его для добавления всех каналов по отдельности. [Подробнее](https://help.cesbo.com/astra/receiving/ip/mpts-via-udp)
- CI-адаптер: можно настроить дешифрование каналов с помощью внешних CI-адаптеров, таких как DigitalDevices Octopus Twin CI или TBS6900. [Подробнее](https://help.cesbo.com/astra/receiving/dvb/external-ci)
- Адаптер SAT>IP: это замена флажка SAT>IP в предыдущих версиях. [Подробнее](https://help.cesbo.com/astra/receiving/dvb/satip-client)
- SAT>IP: увеличить размер приемного буфера
- SAT>IP: больше журналов для ошибок HTTP-соединений

### DVB-тюнеры и DVB-вход

- Для многостандартных адаптеров доступна опция ручного выбора фронтэнда -. `fe_device`. Это можно найти в веб-интерфейсе: Параметры адаптера -> Дополнительно -> FE Device
- Сканирование DVB-адаптеров перед запуском Astra

### Модулятор RESI от DigitalDevices

- Параметры исправления `gain` и `attenuator` для последних версий драйверов
- Размер буфера по умолчанию увеличен до 64 Мб
- Сброс RESI перед запуском

### HTTP/HLS

Вход:

- HLS-вход поддерживает M3U8 с URL-адресами без схемы. Например: `//example.com/media/001.ts`
- Синхронизация битрейта по временным меткам DTS/PTS вместо PCR. (многие потоки HLS имеют искаженные значения PCR)

Выход:

- Переписаны алгоритмы авторизации для повышения производительности (перенесены из Lua-скриптов в C-ядро)
- Авторизация по HTTP Backend поддерживает перенаправления
- Проверка списка IP-адресов при HTTP-авторизации перед другими методами
- HLS Output отправляет пустой TS-файл, если файл не найден (была ошибка 404, но некоторые плееры на базе ffplay отправляют много запросов, пытаясь перезагрузить его)
- Параметры -> HLS -> Session Timeout для настройки времени, в течение которого сессия должна быть закрыта при неактивности

### UDP

- Игнорировать недействительные TS-файлы при вводе (в предыдущих версиях происходил перезапуск приема)
- Вариант `src=IP` для указания адреса источника многоадресной рассылки UDP для IGMPv3. Пример: `udp://eth1@239.255.1.1:1234#src=192.168.88.100`

### MPTS

- Изменение типа EIT с включением `remux_eit` вариант. Если EIT tsid не равен значению `tsid` опция, заданная в настройках MPTS, то тип EIT будет изменен с `actual` на `other`

### Обработка

- опция `set_pcr_pid` изменить PCR pid, если он отделился от видео
- T2MI исправляет проблему с ошибками CC в некоторых потоках

### Мониторинг

- Вариант `interval=SEC` для адреса InfluxDB для определения интервалов отправки. По умолчанию это 60 секунд. Например: `https://example.com:8086#interval=5`
- `app_mem_kb` в [API состояния процесса](https://help.cesbo.com/astra/admin-guide/api/process). Использование памяти процесса в килобайтах
- `video_count` и `audio_count` в [API состояния потока](https://help.cesbo.com/astra/admin-guide/api/stream#get-stream-status)

### Master-Slave

- Вариант `delay` для режима slave-mode для запуска процесса с задержкой. По умолчанию 3 секунды. Пример: `astra -c slave.conf -p 8000 --slave "http://master:8000#delay=10"`

### Веб-интерфейс

- Иконка
- Веб-интерфейс из `als.cesbo.com` интегрированный в бинарный файл Astra (`als.cesbo.com` больше не используется)
- Опция установки пользовательского пути к веб-интерфейсу. Это можно сделать в разделе Настройки -> Общие -> Пользовательский путь. Например, путь `secret`Интерфейс будет доступен по адресу `http://example.com:8000/secret/`
- Опция изменения порта для веб-интерфейса. Эта опция находится в разделе Настройки -> Общие -> Пользовательский порт. Эта опция настраивает значение порта, определенное в параметре `-p` опция. Также поддерживается адрес локального интерфейса, например `127.0.0.1:8000` - веб будет доступен только на localhost
- Опция Settings -> HTTP Play -> Path to TV Screenshots - прикрепление скриншотов каналов к карточкам на приборной панели
- Описание для канала
- Модальные диалоги для настройки параметров потока и адаптера

### Внутренние изменения

- Перемещено большое количество кода из Lua-скриптов в Astra Core для повышения производительности
- Astra проверяет порт для API и Web-интерфейса, чтобы не запускать один и тот же процесс дважды
- Обновление OpenSSL до версии 1.1.1t
- Интеграция LibUV v1.44.2 (подготовка к переходу от внутренней обработки событий к libuv)

## Архивные версии

- [241024](https://cdn.cesbo.com/astra/builds/astra-241024)
- [230719](https://cdn.cesbo.com/astra/builds/astra-230719)
- [230307](https://cdn.cesbo.com/astra/builds/astra-230307)
- [220504](https://cdn.cesbo.com/astra/builds/astra-220504)
