---
title: Playlist for HTTP Play
date: 2023-08-22
sidebar:
    order: 11
---

Astra генерирует простой плейлист со ссылками на все включенные каналы. Этот плейлист доступен только для функции [HTTP Play](/en/astra/delivery-http/http-play/).

![Настройки HTTP Play](https://cdn.cesbo.com/help/astra/delivery/http-hls/playlist/http-play.png)

## Формат плейлиста

Astra предоставляет доступ к плейлистам в следующих форматах:

- `M3U8` - наиболее популярный формат, поддерживаемый всеми медиаплеерами
- `XSPF` - это плейлист на основе XML, поддерживаемый некоторыми плеерами

В этом руководстве мы будем использовать формат M3U8.

## Ссылки на плейлист

Ссылка по умолчанию на плейлист M3U8:

```
http://example.com:8000/playlist.m3u8
```

Где:

- `example.com` - IP-адрес вашего сервера
- `8000` - порт для HTTP Play, по умолчанию равен порту веб-интерфейса Astra, но может быть изменён в настройках HTTP Play
- `playlist.m3u8` - имя файла плейлиста, также может быть изменено в настройках HTTP Play

## Группы каналов

Для удобства навигации можно группировать каналы в плейлисте. Для этого создайте новую категорию в Настройки → Группы. Подробнее о том, как создать [Группы каналов](/en/astra/settings/groups/).

Затем выберите созданную категорию в настройках `HTTP Play`, опция `Playlist Arrange`.

:::note
Некоторые плееры, такие как VLC, не поддерживают группы в M3U8 и отображают плоский плейлист
:::

## Логотипы каналов

Некоторые плееры и middleware-решения отображают логотипы каналов рядом с их названиями в списке каналов.

![Логотипы каналов на Middleware](https://cdn.cesbo.com/help/astra/delivery/http-hls/playlist/mw.jpg)

Для начала скачайте архив с изображениями логотипов с: https://epg.it999.ru/it999_transparent_logo.zip
Вы можете скачать и извлечь архив на вашем сервере, используя следующие команды:

```sh
mkdir -p /var/lib/astra
cd /var/lib/astra
curl -LO https://epg.it999.ru/it999_transparent_logo.zip
unzip it999_transparent_logo.zip
rm it999_transparent_logo.zip
```

В Настройки → `HTTP Play` → `Путь к логотипам ТВ`, установите путь как `/var/lib/astra/it999_transparent_220x132`. Обратите внимание, что имя директории приведено для примера выше.

Предоставленный архив включает логотипы в формате PNG, с именами файлов, совпадающими с названиями каналов. После выполнения этих шагов плейлист будет включать опцию `tvg-logo` для каждого канала.

## Электронный программный гид

Некоторые плееры и middleware-решения отображают текущие и предстоящие события для каналов. Электронный программный гид (EPG) может быть экспортирован в плеер в формате XMLTV или в любом другом формате, поддерживаемом плеером.

В настройках Astra → `HTTP Play` → `M3U Header`, установите опцию

```
url-tvg="https://teleguide.info/download/new3/xmltv.xml.gz"
```

Эта строка будет добавлена в заголовок плейлиста и предоставит информацию о расположении EPG.
Этот URL — лишь пример, вы можете использовать любой другой источник EPG или изучить наше решение, [EPG Aggregator](/en/astra/streams/spts-epg/#epg-aggregator).

Последний шаг — настройка идентификатора канала для связывания ваших каналов с записями EPG. У каждого канала в XMLTV есть уникальный идентификатор, например:

```xml
<channel id="226">
    <display-name lang="en">Discovery Channel</display-name>
</channel>
```

В Astra перейдите в настройки канала, откройте вкладку EPG и установите значение `XMLTV Channel ID` в `226`:

![Опции EPG потока](https://cdn.cesbo.com/help/astra/delivery/http-hls/playlist/stream-epg.png)