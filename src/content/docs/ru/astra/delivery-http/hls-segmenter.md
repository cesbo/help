---
title: HLS Segmenter
sidebar:
    order: 13
---

HLS (HTTP Live Streaming) — один из самых популярных протоколов потоковой передачи мультимедиа. Он предназначен для передачи аудио- и видеоданных по HTTP с сервера на клиентов. Медиаконтент может распространяться через сети доставки контента (CDN) для повышения доступности. В сочетании с динамическим, адаптивным стримингом HLS обеспечивает наивысшее качество в изменяющихся сетевых условиях.

![Диаграмма HLS](https://cdn.cesbo.com/help/astra/delivery/http-hls/hls-segmenter/diagram.svg)

HLS Segmenter — это функция Astra, позволяющая разбивать непрерывный медиапоток на HLS сегменты. Для обеспечения доступа к HLS сегментам Astra генерирует HLS медиаплейлист.

Astra конкретно функционирует в качестве HLS сегментатора. Другие функции, такие как транскодирование и кэширование, требуют дополнительного программного обеспечения. Например, для транскодирования рекомендуется использовать FFmpeg, а для кэширования — Nginx.

## Опции HLS Сегментатора

В веб-интерфейсе Astra опции HLS доступны в разделе Настройки → HLS

![Опции HLS Сегментатора](https://cdn.cesbo.com/help/astra/delivery/http-hls/hls-segmenter/options.png)

- `Duration` - длительность HLS сегмента в секундах. По умолчанию: 3
- `Quantity` - количество сегментов в одном HLS медиаплейлисте. Установка по умолчанию: 4

### Нейминг сегментов

Метод генерации имени файла для HLS сегментов

- `PCR-hash` - значение по умолчанию. Безопасный вариант, Astra использует временную метку из потока для имени файла
- `Sequence` - последовательный номер в качестве имени файла

### Путь к ресурсам

Путь к ресурсам позволяет выбрать путь к ресурсам в HLS медиаплейлисте:

- `Absolute` - значение по умолчанию. URL с указанием источника и полного пути к ресурсу. Например: `https://example.com/play/channel-id/segment-001.ts`
- `Relative` - относительный путь к ресурсу. Например: `segment-001.ts`
- `Full` - полный путь к ресурсу. Например: `/play/channel-id/segment-001.ts`

### Другие опции

- `Round duration value` - эта функция округляет длительность сегментов медиапотока до целых значений (не рекомендуется)
- `Use Expires header` - эта опция добавляет заголовок Expires в HTTP ответ. Этот заголовок необходим для прокси-кэшей. Подробнее об этом читайте в [HLS Кэширование прокси с Nginx](/en/articles/tools-and-utilities/hls-caching-proxy-with-nginx)
- `Pass all data PIDs` - по умолчанию только видео- и аудиопакеты записываются в HLS сегменты. Эта опция позволяет записывать все пакеты данных.

### HLS Медиаплейлист

- `Use default headers for .m3u8` - с этой опцией Astra добавляет HTTP заголовки в ответ с HLS медиаплейлистом для поддержки Cross-Origin Resource Sharing. Включено по умолчанию

### HLS Сегменты

- `TS Extension` - эта опция позволяет настроить расширение файла для HLS сегментов. По умолчанию: `ts`
- `TS mime type` - эта опция позволяет настроить MIME тип для HLS сегментов. По умолчанию: `video/MP2T`
- `Use default headers for .ts` - с этой опцией Astra добавляет HTTP заголовки в ответ с HLS сегментом для поддержки Cross-Origin Resource Sharing. Включено по умолчанию