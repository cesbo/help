---
title: MPEG-TS
sidebar:
    order: 8
---

MPEG-TS (Transport Stream) - это транспортный формат для передачи видео, аудио и других данных через IP или широкополосные сети.
Подробное описание доступно в стандарте [ISO 13818-1](https://www.iso.org/standard/74427.html).

## Пакетированный элементарный поток

Элементарный поток (ES) - это сжатые данные, выходящие из кодировщика.

Пакетированный элементарный поток (PES) - это последовательность заголовков с информацией ES и кадрами ES.
Мультиплексирование - это операция пакетирования нескольких элементарных потоков в единый поток.
Демультиплексирование - это обратный процесс мультиплексирования. Демультиплексирование единого потока на отдельные компоненты и передача компонентов для обработки.

## Программо-специфическая информация

Программо-специфическая информация (PSI) - это пакеты с информацией о потоке для приемника, чтобы демультиплексировать и декодировать потоки программы.

- Таблица ассоциации программ (PAT) - список программ. Содержит номер программы (PNR) и идентификатор пакета (PID) связанного PMT
- Таблица отображения программ (PMT) - список потоков программы. PID связанные с видео, аудио и другими данными
- Таблица условного доступа (CAT) - информация об условных системах доступа

## Сервисная информация

В дополнение к PSI, нужны данные для предоставления информации о сервисах и событиях пользователю:

- Таблица информации о сети (NIT)
- Таблица описания услуг (SDT) - информация, такая как имя сервиса, имя поставщика и т.д.
- Таблица информации о событиях (EIT) - содержит информацию о событиях, таких как имя события, время начала и т.д.
- Таблица времени и даты (TDT)
- Таблица смещения времени (TOT)

## Транспортный поток

Транспортный поток - это последовательность TS-пакетов.
TS-пакеты имеют фиксированную длину в 188 байт. Первый байт, также называемый синхронным байтом, всегда 0x47.
Следующие 3 байта являются заголовком. Оставшиеся 184 байта - это нагрузка (пакеты PES, PSI или SI).

Заголовок TS содержит следующую информацию:

- Идентификатор пакета (PID). Может быть в диапазоне от 0 до 8191
- Счетчик непрерывности (CC). Может быть в диапазоне от 0 до 15. С помощью счетчика анализатор MPEG-TS может обнаруживать нарушение непрерывности пакетов.
- Индикатор начала блока нагрузки - это единичный бит, указывающий, содержит ли пакет начало нагрузки

## PID - Идентификатор пакета TS

Элементарные потоки (видео, аудио) и информационные таблицы упаковываются в TS-пакеты. Каждый пакет имеет уникальный идентификатор - PID.
Значение PID должно быть между 0 и 8191. Диапазон от 0 до 31 и 8191 зарезервирован и не должен использоваться. Вы можете использовать любой PID в диапазоне от 32 до 8190.