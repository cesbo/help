---
title: "Resolve issue with Unsupported SFP+ module"
date: 2023-06-23
sidebar:
    order: 13
---

Вы можете столкнуться с проблемой с модулями SFP+ на адаптере Intel 10G, когда карта не инициализирует модуль SFP+, отображая следующее сообщение об ошибке в dmesg:

```
ixgbe 0000:02:00.1: failed to load because an unsupported SFP+ module type was detected.
```

## Решение

Выгрузите драйвер:

```
rmmod ixgbe
```

Загрузите драйвер с опцией `allow_unsupported_sfp=1`:

```
modprobe ixgbe allow_unsupported_sfp=1
```

Если сетевой интерфейс был успешно запущен, вы можете настроить сеть и убедиться, что она работает правильно.

### Несколько сетевых интерфейсов

Если существует несколько сетевых интерфейсов, может потребоваться записать 1 для каждого из них, разделяя запятой. Для четырех интерфейсов опция будет выглядеть следующим образом:

```
modprobe ixgbe allow_unsupported_sfp=1,1,1,1
```

## Сохранение опции

Вышеуказанное решение предназначено только для тестирования и будет сброшено после перезагрузки сервера. Для постоянной конфигурации передайте параметр ядру через загрузчик grub.

Откройте файл `/etc/default/grub` в любом текстовом редакторе и найдите строку, начинающуюся с:

```
GRUB_CMDLINE_LINUX_DEFAULT=
```

добавьте параметр `ixgbe.allow_unsupported_sfp=1`:

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash ixgbe.allow_unsupported_sfp=1"
```

Сохраните файл и примените изменения:

```
sudo update-grub
```

Перезагрузите ваш сервер.